{% extends "base.html" %}

{% block content %}
<div class="chat-wrapper">

  <div class="chat-header">
    <h3>Chat with {{ conversation.user }}</h3>
  </div>

  <div class="chat-body">
    {% for msg in messages %}
      <div class="chat-message {% if msg.sender == request.user %}user{% else %}admin{% endif %}">
        <div class="chat-bubble">
          <div class="chat-text">
            {{ msg.text }}
          </div>
          <div class="chat-time">
            {{ msg.created_at|date:"H:i" }}
          </div>
        </div>
      </div>
    {% empty %}
      <div class="empty-chat">
        No messages yet.
      </div>
    {% endfor %}
  </div>

  <div class="chat-footer">
    <form method="post" class="chat-form">
      {% csrf_token %}
      {{ form.text }}
      <button type="submit" class="btn-send">Reply</button>
    </form>
  </div>

</div>
{% endblock %}